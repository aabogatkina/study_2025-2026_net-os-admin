---
# Preamble

## Author
author:
  name: Богаткина Алёна Александровна
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: kulyabov-ds@rudn.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: "Доклад"
subtitle: "SSH-туннели. Разновидности. Настройка."
license: "CC BY"
## Generic options
lang: ru-RU
number-sections: true
toc: true
toc-title: "Содержание"
toc-depth: 2
## Crossref customization
crossref:
  lof-title: "Список иллюстраций"
  lot-title: "Список таблиц"
  lol-title: "Листинги"
## Bibliography
bibliography:
  - bib/cite.bib
csl: _resources/csl/gost-r-7-0-5-2008-numeric.csl
## Formats
format:
### Pdf output format
  pdf:
    toc: true
    number-sections: true
    colorlinks: false
    toc-depth: 2
    lof: true # List of figures
    lot: true # List of tables
#### Document
    documentclass: scrreprt
    papersize: a4
    fontsize: 12pt
    linestretch: 1.5
#### Language
    babel-lang: russian
    babel-otherlangs: english
#### Biblatex
    cite-method: biblatex
    biblio-style: gost-numeric
    biblatexoptions:
      - backend=biber
      - langhook=extras
      - autolang=other*
#### Misc options
    csquotes: true
    indent: true
    header-includes: |
      \usepackage{indentfirst}
      \usepackage{float}
      \floatplacement{figure}{H}
      \usepackage[math,RM={Scale=0.94},SS={Scale=0.94},SScon={Scale=0.94},TT={Scale=MatchLowercase,FakeStretch=0.9},DefaultFeatures={Ligatures=Common}]{plex-otf}
### Docx output format
  docx:
    toc: true
    number-sections: true
    toc-depth: 2
---

# Введение

В современной информационной среде, характеризующейся распределением ресурсов и повышенными требованиями к безопасности, задача защиты передаваемых данных является одной из первостепенных. Одной из фундаментальных технологий,
призванных решить эту задачу, является протокол Secure Shell (SSH). Администраторам и специалистам в области информационных технологий постоянно приходится обеспечивать доступ к внутренним сетевым ресурсам для удаленных
пользователей, управлять серверами и безопасно передавать данные. В этом контексте протокол SSH (Secure Shell) давно зарекомендовал себя как незаменимый инструмент, предоставляющий не только безопасный канал для удаленного управления, но и мощный механизм для туннелирования сетевого трафика.

SSH-туннелирование, или перенаправление портов (Port Forwarding), — это технология, которая позволяет инкапсулировать трафик любого сетевого протокола в зашифрованное SSH-соединение. Это открывает широкие возможности для обхода
сетевых ограничений, безопасного доступа к внутренним сервисам закрытых сетей и создания защищенных каналов связи для программ, не поддерживающих шифрование нативно.

Актуальность темы обусловлена повсеместным использованием SSH, широким спектром практических задач, решаемых с помощью туннелирования, и необходимостью понимания различий между типами туннелей для их корректного и безопасного применения.

Целью данного доклада является комплексное исследование технологии SSH- туннелирования, изучение его разновидностей и освоение практических навыков настройки.

# Глава 1. Принципы работы SSH-туннелирования

## Что такое SSH, SSH-туннель и зачем он нужны?

**Secure Shell (SSH)** — это сетевой протокол, предназначенный для безопасного удалённого управления операционными системами и передачи данных. Одной из ключевых и наиболее востребованных его функций является возможность создания SSH-туннелей (технология проброса портов — Port Forwarding).

SSH-туннель представляет собой защищённое соединение, в рамках которого трафик одного сетевого протокола инкапсулируется и передаётся через канал связи, зашифрованный по протоколу SSH. Этот механизм позволяет создавать безопасные
"коридоры" между локальным и удалённым узлом, обеспечивая сквозное шифрование всех передаваемых данных и эффективно защищая их от перехвата и несанкционированного доступа.

Таким образом, технология SSH-туннелирования служит мощным инструментом, обеспечивая не только безопасное управление, но и гибкую организацию доступа к сетевым сервисам. ([рис. @fig-001])

![](image/1.png){#fig-001 width=70%}

## История появления SSH

Технология SSH (Secure Shell) была создана в 1995 году финским исследователем Тату Юлёненом как ответ на растущие угрозы безопасности в открытых сетях. В тот период для удаленного управления системами и передачи данных повсеместно использовались протоколы семейства r-команд (rlogin, rsh, rcp) и Telnet. Фундаментальный недостаток этих протоколов заключался в передаче всей информации, включая аутентификационные данные (логины и пароли) и собственно команды, в открытом, незашифрованном виде. Это делало их крайне уязвимыми к пассивному прослушиванию трафика и активным атакам, таким как подмена IP-адреса и перехват сессии. SSH был разработан с целью полного устранения этих рисков путем предоставления безопасного канала связи поверх потенциально небезопасной сети.

Первоначальная версия, известная как SSH-1, быстро получила распространение в академической и IT-среде. Однако впоследствии в ней были обнаружены уязвимости архитектурного характера. Это стимулировало разработку полностью переработанной и формализованной версии протокола — SSH-2, которая была стандартизирована рабочей группой IETF в 2006 году в документах RFC 4250—4254. SSH-2 обладает более надежной модульной архитектурой, разделяющей транспортный уровень,
уровень аутентификации пользователя и уровень соединения.

Функциональность туннелирования, является прямым следствием модульного дизайна SSH-2. Протокол уровня соединения позволяет инкапсулировать трафик любых приложений, использующих протоколы TCP, в защищенный SSH-канал. Туннелирование стало неотъемлемой и мощной составляющей экосистемы SSH, превратив протокол в краеугольный камень современной сетевой безопасности и гибкости

## Принцип работы SSH-туннелей

С методологической точки зрения, процесс туннелирования инициируется SSH- клиентом, который устанавливает стандартное TCP-соединение с SSH-сервером на 22-й порт. После успешного прохождения этапов аутентификации и согласования
параметров сессии между клиентом и сервером формируется симметричный зашифрованный канал. Ключевой механизм заключается в том, что SSH-клиент начинает прослушивать определенный сетевой порт на локальной или удаленной машине. При установлении соединения с этим портом клиент не обрабатывает полученные данные самостоятельно, а перенаправляет их по защищенному SSH-каналу на SSH-сервер. Сервер, в свою очередь, выступая в роли ретранслятора, перенаправляет этот трафик на целевой хост и порт, указанный при настройке туннеля.

# Глава 2. Разновидности SSH-туннелей

С точки зрения архитектуры взаимодействия и направления передачи данных, туннели, создаваемые по протоколу SSH, принято классифицировать на три основных типа: локальные (Local Forwarding), удаленные (Remote Forwarding) и динамические
(Dynamic Forwarding). Каждый из них решает определенный класс задач, имея уникальный механизм маршрутизации сетевого трафика.

## Локальный туннель

**Локальный туннель (Local Forwarding)** представляет собой механизм перенаправления трафика, при котором SSH-клиент, работающий на локальной машине пользователя, прослушивает указанный порт на локальном интерфейсе. Все соединения,
установленные с этим портом, инкапсулируются в SSH-сессию и передаются на удаленный SSH-сервер, который выступает в роли ретранслятора. Далее сервер устанавливает соединение с целевым хостом и портом, которые были заданы при
настройке туннеля. Данная конфигурация является наиболее распространенной и применяется для безопасного доступа к сетевым сервисам, расположенным в защищенной сегменте сети, физически недоступной для клиента, но доступной для SSH-сервера. ([рис. @fig-003])

![Локальный туннель (Local Forwarding)](image/3.png){#fig-003 width=70%}

## Удаленный туннель

**Удаленный туннель (Remote Forwarding или Reverse SSH Tunneling)** реализует обратную логику. В этом случае SSH-сервер начинает прослушивать заданный порт на своей стороне, а SSH-клиент инициирует перенаправление трафика в обратном
направлении. Соединения, поступающие на этот порт SSH-сервера, инкапсулируются и передаются через установленное SSH-соединение обратно на клиентскую машину, которая, в свою очередь, перенаправляет их на указанный целевой хост и порт в своей локальной сети. Этот тип туннелирования критически важен для организации доступа извне к сервисам, находящимся за сетевыми экранами или в сетях с трансляцией адресов, например, для удаленного администрирования или предоставления временного доступа к внутреннему веб-серверу. ([рис. @fig-004])

![Удаленный туннель (Local Forwarding)](image/4.png){#fig-004 width=70%}

## Динамический туннель

**Динамический туннель (Dynamic Forwarding)** предлагает более универсальный, хотя и сложный, подход. Вместо статического связывания локального порта с конкретным целевым хостом и портом, SSH-клиент настраивает на локальной машине SOCKS-
прокси сервер на указанном порту. Клиентские приложения, поддерживающие работу через SOCKS-прокси (часто версии 4 или 5), могут направлять через этот порт свой трафик любого типа и для любого адресата. SSH-сервер, получая инкапсулированные
пакеты, динамически устанавливает соединения с запрошенными удаленными хостами от имени клиента. Это позволяет туннелировать весь сеанс работы приложения, что особенно полезно для безопасного веб-серфинга в ненадежных сетях, так как весь TCP-траффик проходит через зашифрованный канал. ([рис. @fig-005])

![Динамический туннель (Local Forwarding)](image/5.png){#fig-005 width=70%}

# Глава 3. Настройка SSH-туннелей

## Синтаксис команды ssh для создания туннелей

1. Локальный туннель (Local Port Forwarding) инициируется с использованием ключа -L. Данная конфигурация перенаправляет трафик, поступающий на указанный порт локального интерфейса, через SSH-соединение на целевой хост, доступный с SSH-
сервера. Синтаксис команды имеет вид: ```ssh -L [локальный_порт]:[целевой_хост]:[целевой_порт] user@ssh_сервер```. Где:

- ```[локальный_порт]``` — порт на клиентской машине
- ```[целевой_хост]``` и ```[целевой_порт]``` — IP-адрес (или доменное имя) и порт службы, к которой требуется предоставить доступ
- ```user@ssh_сервер``` — учетные данные для аутентификации на промежуточном SSH-сервере.

2. Удаленный туннель (Remote Port Forwarding) активируется ключом -R и реализует обратное по отношению к локальному туннелю перенаправление. Он позволяет пробросить порт с SSH-сервера обратно на клиентскую машину или в доступную из
нее сеть. Синтаксис команды: ```ssh -R [удаленный_порт]:[целевой_хост]:[целевой_порт] user@ssh_сервер```. В данной конструкции ```[удаленный_порт]``` — это порт, который будет открыт на интерфейсе SSH-сервера для приема входящих подключений, которые затем будут транслироваться на ```[целевой_хост]:[целевой_порт]```, находящиеся в сетевом окружении
клиента.

3. Динамический туннель (Dynamic Port Forwarding) создается с применением ключа -D и функционирует как SOCKS-прокси. В отличие от статического перенаправления портов, данный метод позволяет маршрутизировать трафик для множества различных
удаленных узлов через единый локальный порт. Синтаксис команды: ```ssh -D [локальный_порт] user@ssh_сервер```. Параметр ```[локальный_порт]``` определяет порт на клиентской машине, который начинает работать в качестве SOCKS-прокси, динамически устанавливая соединения через SSH-сервер.

## Дополнительные ключи и опции

Для гибкого управления сеансами туннелирования клиент ssh поддерживает ряд дополнительных опций:

- Ключ -N указывает, что не должен выполняться удаленная команда. Это полезно, когда единственной целью сеанса является перенаправление портов. Например, ```ssh -N -L 8080:localhost:80 user@host ``` создаст туннель без предоставления
интерактивной оболочки.

- Ключ -f переводит процесс ssh в фоновый режим после успешной аутентификации. Это позволяет освободить терминал для дальнейшей работы. Комбинация -f и -N является стандартной практикой для запуска туннелей в качестве фоновых сервисов.

- Ключ -g позволяет удаленным хостам подключаться к локальному перенаправленному порту. По умолчанию, служба, слушающая на локальном порту туннеля, доступна только с локального интерфейса (127.0.0.1). Использование опции - g заставляет ssh привязать туннель к интерфейсу 0.0.0.0, сделав его доступным для других машин в сети. Например, ```ssh -g -L 8080:remote_host:80 user@jump_host``` позволит другим компьютерам в локальной сети использовать данную машину как шлюз для доступа.

# Выводы

В рамках данного доклада было проведено комплексное исследование технологии SSH-туннелирования, рассмотрены её основные разновидности и проанализированы практические аспекты настройки. Было установлено, что SSH-туннелирование,
базирующееся на возможностях протокола Secure Shell, представляет собой мощный и гибкий механизм обеспечения безопасности и организации доступа в сетевых средах.

Изучение синтаксиса и дополнительных опций клиента ssh подтвердило, что данный инструмент предоставляет администратору широкие возможности по управлению туннелями, включая их запуск в фоновом режиме, ограничение функциональности
только перенаправлением портов и настройку доступности туннеля для других узлов сети.

Таким образом, технология SSH-туннелирования является неотъемлемым инструментом для специалистов по информационной безопасности и системных администраторов. Понимание принципов её работы, особенностей различных типов
туннелей и владение навыками их настройки позволяют эффективно решать широкий спектр задач, связанных с безопасным удаленным доступом, обходом сетевых ограничений и защитой передаваемых данных. Универсальность, надежность и безопасность делают SSH-туннелирование одним из ключевых инструментов для построения защищенных и отказоустойчивых сетевых инфраструктур.

# Список литературы

1. [Лаборатораня работа №10](https://esystem.rudn.ru/pluginfile.php/2854770/mod_resource/content/6/010-smtp-adv.pdf)
